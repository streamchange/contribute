<!DOCTYPE html>
<html>
<head>
  <title>Build A Contributor Link ðŸ¦€</title>
  <link rel="stylesheet" href="stylesheet.css">
</head>


<body class="body">
  <div class="responsive">
    <div class="form">
      <h1>Build A Contributor Link ðŸ¦€</h1>
      <label for="nameInput">Presenter Name</label>
      <input type="text" id="nameInput" value='Nick Waterman' size=30>
      <br>
      <label for="callPassInput">vMix Call Password</label>
      <input type="text" id="callPassInput" value='7744808725' size=30>
      <br>
      <label for="clickerCodeInput">Internet Clicker Code</label>
      <input type="text" id="clickerCodeInput" value='badgerbadgerbadger' size=30>
      <br>
      <input type="checkbox" id="optionalCheckbox" onclick="showOptional()">
      <strong>Use Optional Settings</strong>
      <br>
      <form id="optional" style="display:none">
      <label for="backgroundColour">Background Colour (hex value without # eg. df7020)</label>
      <input type="text" id="backgroundColourInput" value='df7020' size=30>
      <br>
      <label for="borderColour">Border Colour (hex value without # eg. FFFFFF)</label>
      <input type="text" id="borderColourInput" value='FFFFFF' size=30>
      <!--label for="logoSource">Logo Source (doesnt work yet)</label>
      <input type="text" id="logoSource" value='https://virtual.scenechange.com.au/wp-content/uploads/2020/08/scene_change-logo.png'-->
      </form>
      <button id="copyBtn">Copy link to clipboard</button>
      <button id="goBtn">Go to link</button>
      <br>
      <code id="linkOutput"></code>
      <br id="extraLine">

    </div>
  </div>
</body>
</html>

<script type="text/javascript">

var linkOutput = document.getElementById('linkOutput')
linkOutput.style.display = "none"

var extraLine = document.getElementById('extraLine')
extraLine.style.display = "block"

const copyBtn = document.getElementById('copyBtn');
copyBtn.addEventListener("click" ,copyBtnPressed);

const goBtn = document.getElementById('goBtn');
goBtn.addEventListener("click" ,gotoBtnPressed);

var link = 'initial data'
var optionalCheckbox = document.getElementById("optionalCheckbox");

function copyBtnPressed(){
  updateLink(copyLink)
}

function gotoBtnPressed(){
  updateLink(gotoLink)
}

function updateLink(callback){
  var nameInput = document.getElementById('nameInput').value
  var nameClean = encodeURIComponent(nameInput)
  var callPass = document.getElementById('callPassInput').value
  var clickerCode = document.getElementById('clickerCodeInput').value
  var backgroundColour = document.getElementById('backgroundColourInput').value
  var borderColour = document.getElementById('borderColourInput').value


  console.log("name: " + nameInput)
  console.log("callpass: " + callPass)
  console.log("clickercode: " + clickerCode)

  link = `contribute.streamchange.com/?name=${nameClean}&callpass=${callPass}&clickercode=${clickerCode}`

  if(optionalCheckbox.checked == true){
    link += `&backgroundcolour=${backgroundColour}&bordercolour=${borderColour}`

  }

  callback()

  }


  //


function copyLink(){

  navigator.clipboard.writeText(link)
  linkOutput.innerText = 'Copied link to clipboard'
  linkOutput.style.display = "block"
  extraLine.style.display = "none"
  document.activeElement.blur()
}
function gotoLink(){
  window.location.assign("https://"+link);
}
function showOptional() {
  // Get the checkbox

  // Get the output text
  var text = document.getElementById("optional");

  // If the checkbox is checked, display the output text
  if (optionalCheckbox.checked == true){
    text.style.display = "block";
  } else {
    text.style.display = "none";
  }
}

</script>